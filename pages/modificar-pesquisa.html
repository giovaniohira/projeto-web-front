<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Modificar Pesquisa</title>
        <link rel="icon" type="image/x-icon" href="/images/icon.ico">
        <link rel="stylesheet" href="../styles/header.css">
        <link rel="stylesheet" href="../styles/container-1.css">
        <link rel="stylesheet" href="../styles/body.css">
        <link rel="stylesheet" href="../styles/buttons.css">
        <script type="text/javascript">
            var lista = JSON.parse(window.localStorage.getItem("listaPesquisa"))
            var chave = window.sessionStorage.getItem("chave")

            arquivoEscolhido = () => {
                var arquivo = document.getElementById("imagembt").files[0].name;
                document.getElementById("nomeArquivo").value = arquivo;
                document.getElementById("imagemArquivo").src = URL.createObjectURL(document.getElementById("imagembt").files[0]);
            }   

            window.onload = () => {
                var listaAtual = lista[chave]

                document.getElementById("nome").value = listaAtual.nome
                document.getElementById("data").value = listaAtual.data

            }

            alterarPesquisa = () => {
                lista[chave].nome = document.getElementById("nome").value;
                lista[chave].data = document.getElementById("data").value;
                lista[chave].imagem = document.getElementById("nomeArquivo").value;
            
                window.localStorage.setItem("listaPesquisa", JSON.stringify(lista));
            }

            apagarPesquisa = () => {
                lista.splice(chave, 1)
                window.localStorage.setItem("listaPesquisa", JSON.stringify(lista))
            }
        </script>
    </head>
    <body>
        <header>
            <a href="home.html">
                <div id="header-secao-logo">
                    <svg style="margin: 5px 15px 5px 5px" width="40" height="40" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M23.0833 14.7917C23.7083 14.7917 24.2396 14.5729 24.6771 14.1354C25.1146 13.6979 25.3333 13.1667 25.3333 12.5417C25.3333 11.9167 25.1146 11.3854 24.6771 10.9479C24.2396 10.5104 23.7083 10.2917 23.0833 10.2917C22.4583 10.2917 21.9271 10.5104 21.4896 10.9479C21.0521 11.3854 20.8333 11.9167 20.8333 12.5417C20.8333 13.1667 21.0521 13.6979 21.4896 14.1354C21.9271 14.5729 22.4583 14.7917 23.0833 14.7917ZM10.9166 14.7917C11.5416 14.7917 12.0729 14.5729 12.5104 14.1354C12.9479 13.6979 13.1666 13.1667 13.1666 12.5417C13.1666 11.9167 12.9479 11.3854 12.5104 10.9479C12.0729 10.5104 11.5416 10.2917 10.9166 10.2917C10.2916 10.2917 9.7604 10.5104 9.3229 10.9479C8.8854 11.3854 8.66665 11.9167 8.66665 12.5417C8.66665 13.1667 8.8854 13.6979 9.3229 14.1354C9.7604 14.5729 10.2916 14.7917 10.9166 14.7917ZM17 26.125C18.8333 26.125 20.5208 25.6319 22.0625 24.6458C23.6041 23.6597 24.7222 22.3194 25.4166 20.625H23.25C22.6111 21.7361 21.7361 22.5903 20.625 23.1875C19.5139 23.7847 18.3125 24.0833 17.0208 24.0833C15.7291 24.0833 14.5208 23.7917 13.3958 23.2083C12.2708 22.625 11.4028 21.7639 10.7916 20.625H8.58331C9.30554 22.3194 10.4305 23.6597 11.9583 24.6458C13.4861 25.6319 15.1666 26.125 17 26.125ZM17 33.6667C14.6944 33.6667 12.5278 33.2292 10.5 32.3542C8.4722 31.4792 6.70831 30.2917 5.20831 28.7917C3.70831 27.2917 2.52081 25.5278 1.64581 23.5C0.770813 21.4722 0.333313 19.3056 0.333313 17C0.333313 14.6944 0.770813 12.5278 1.64581 10.5C2.52081 8.47222 3.70831 6.70833 5.20831 5.20833C6.70831 3.70833 8.4722 2.52083 10.5 1.64583C12.5278 0.770828 14.6944 0.333328 17 0.333328C19.3055 0.333328 21.4722 0.770828 23.5 1.64583C25.5278 2.52083 27.2916 3.70833 28.7916 5.20833C30.2917 6.70833 31.4792 8.47222 32.3541 10.5C33.2291 12.5278 33.6666 14.6944 33.6666 17C33.6666 19.3056 33.2291 21.4722 32.3541 23.5C31.4792 25.5278 30.2917 27.2917 28.7916 28.7917C27.2916 30.2917 25.5278 31.4792 23.5 32.3542C21.4722 33.2292 19.3055 33.6667 17 33.6667ZM17 31.1667C20.9548 31.1667 24.3047 29.7943 27.0495 27.0495C29.7943 24.3047 31.1667 20.9549 31.1667 17C31.1667 13.0451 29.7943 9.6953 27.0495 6.9505C24.3047 4.20572 20.9548 2.83333 17 2.83333C13.0451 2.83333 9.69529 4.20572 6.95048 6.9505C4.2057 9.6953 2.83331 13.0451 2.83331 17C2.83331 20.9549 4.2057 24.3047 6.95048 27.0495C9.69529 29.7943 13.0451 31.1667 17 31.1667Z" fill="aliceblue"/>
                    </svg>                                           
                    <spam>Satisfying.you</spam>
                </div>
            </a>
            <div id="header-secao-direita">
                <a id="botao-apagar"  href="home.html" onclick="apagarPesquisa()">
                    <svg width="30" height="30" viewBox="0 0 20 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M6.525 21C6.1125 21 5.75937 20.8531 5.46563 20.5594C5.17188 20.2656 5.025 19.9125 5.025 19.5V5.25H4V3.75H8.7V3H15.3V3.75H20V5.25H18.975V19.5C18.975 19.9 18.825 20.25 18.525 20.55C18.225 20.85 17.875 21 17.475 21H6.525ZM17.475 5.25H6.525V19.5H17.475V5.25ZM9.175 17.35H10.675V7.375H9.175V17.35ZM13.325 17.35H14.825V7.375H13.325V17.35Z" fill="#F57F7F"/>
                    </svg>
                    <spam>Apagar</spam>
                </a>
                <a href="index.html">
                    <spam>Sair</spam>
                </a>
            </div>
        </header>
        <main>
            <div class="container-1">
                <div class="container-1-titulo">
                    <spam>Atualize os dados da pesquisa</spam>
                </div>
                <form class="container-1-form">
                    <label>Nome da pesquisa</label>
                    <input id="nome">
                    <label>Data</label>
                    <input id="data">
                    <label >Imagem</label>
                    <div style="display: flex; flex-direction: row;">
                        <input type="text" id="nomeArquivo" style="width: 60%;" >
                        <button class="botao-cinza" style="width: 40%; margin-left: 10px;" onclick="document.getElementById('imagembt').click(); return false;">Escolher arquivo</button>
                    </div>
                    <input type="file" id="imagembt" style="opacity: 0;" accept="image/png, image/jpeg" onchange="arquivoEscolhido()">
                    <img class="imagem-pesquisa" id="imagemArquivo">
                </form>
                <div class="container-1-botoes" style="justify-content: flex-end;">
                    <a href="home.html">
                        <button class="botao-verde" onclick="alterarPesquisa()">Criar</button>
                    </a>
                </div>
            </div>
        </main>
    </body>
</html>